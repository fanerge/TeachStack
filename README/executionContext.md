# 描述JS中基本概念
##  Execution context(EC)
执行环境或执行上下文<br>
执行环境分为三种(全局执行环境，函数执行环境，evel()执行环境)<br>
js为每一个执行环境关联了一个变量对象。环境中定义的所有变量和函数都保存在这个对象中<br>
### Execution context stack(ECS)
执行环境栈(执行上下文栈)<br>
当javascript代码文件被浏览器载入后，默认最先进入的是一个全局的执行上下文。当在全局上下文中调用执行一个函数时，程序流就进入该被调用函数内，此时引擎就会为该函数创建一个新的执行上下文，并且将其压入到执行上下文堆栈的顶部。浏览器总是执行当前在堆栈顶部的上下文，一旦执行完毕，该上下文就会从堆栈顶部被弹出，然后，进入其下的上下文执行代码。这样，堆栈中的上下文就会被依次执行并且弹出堆栈，直到回到全局的上下文。
### EC的组成
```
变量对象（VO）：arguments、variables、functions
[[Scope]]属性：指向作用域链
this指针：指向一个环境对象
```
### 变量对象和活动对象的关系
VO分为全局上下文VO（全局对象，Global object)和函数上下文的AO。<br>
变量对象是规范上的或者说是引擎实现上的，不可在 JavaScript 环境中访问，只有到当进入一个执行上下文中，这个执行上下文的变量对象才会被激活，所以才叫 activation object。<br>
它们其实都是同一个对象，只是处于执行环境的不同生命周期。<br>
AO = VO + function parameters + arguments<br>
```
进入执行上下文时，VO的初始化过程具体如下(有先后顺序)：
函数的形参（当进入函数执行上下文时）
—— 变量对象的一个属性，其属性名就是形参的名字，其值就是实参的值；对于没有传递的参数，其值为undefined

函数声明（FunctionDeclaration, FD） —— 变量对象的一个属性，其属性名和值都是函数对象创建出来的；如果变量对象已经包含了相同名字的属性，则替换它的值

变量声明（var，VariableDeclaration） —— 变量对象的一个属性，其属性名即为变量名，其值为undefined;如果变量名和已经声明的函数名或者函数的参数名相同，则不会影响已经存在的属性。
```
### [[Scope]] 作用域
Scope：自己的VO以及所有父执行上下文中的VO一直到全局VO（GO）<br>
f2.EC.Scope = [f2.EC.AO + f2.[[scope]], ...直到全局GO];<br>
// 表示：f2表示函数，f2的EC上的Scope属性等于f2的EC上的AO + f2的静态属性[[scope]]继续向上,<br>
变量的作用域就两种：全局变量和局部变量<br>

> 参考文档：
[javascript 执行环境，变量对象，作用域链](https://segmentfault.com/a/1190000000533094)
[JS 执行环境、作用域链、活动对象](https://segmentfault.com/a/1190000015782315)
