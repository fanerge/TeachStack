#   Hidden class（Shape 、Inline Cache）
V8的对象主要由三个指针构成，分别是隐藏类（Hidden Class），Property 还有 Element。
```
// Hidden Class
主要为类似的对象（同一构造函数、类的实例，主要是保证相同的顺序初始化对象成员）提供相同的 Shape，用来提升属性的存取性能
每次添加属性时，新创建  Hidden Class 实际上只会描述这个新添加的属性（增加或删除可索引属性，不会引起隐藏类的变化）
delete 属性可以会产生新的 Hidden Class ，而 obj[待删除的属性] = undefined 不会

// 可索引属性会被存储到 Elements 指针指向的区域（会自动按升序）
{ 1: "a", 2: "b" }
// 命名属性会被存储到 Properties 指针指向的区域（会按写入对象的顺序）
{ "first": 1, "second": 2 }
```

[V8 是怎么跑起来的 —— V8 中的对象表示](https://juejin.im/post/5cc7dc5af265da038d0b514d)
# 数组
##  数组存储模式
Fast Elements 是传统的线性存储方式，而 Dictionary Elements 使用的是 Hash 表存储。<br>
Fast Elements：该模式为默认模式，对于一个新创建的数组赋值时，数组的存储空间是可以动态增长的。<br>
Fast Holey Elements：还有一种子模式Fast Holey Elements，此模式适合于数组中只有某些索引存有元素，而其他的索引都没有赋值的情况（访问时引擎会返回 undefined）。<br>
Dictionary Elements：此方式最适合于存储稀疏数组，它不用开辟大块连续的存储空间，节省了内存，但是由于需要维护这样一个 Hash-Table。<br>
##  存储模式切换
其上的几种模式 V8 引擎可以自由切换。<br>
在 Fast Elements 模式下，capacity 用于指示当前内存占用量大小，通常根据数组当前最大索引的值确定。在数组索引过大，超过 capacity 到一定程度( 由 kMaxGap 决定，其值为 1024) ，数组将 直接转化为 Dictionary Elements 模式
##  数组性能优化
避免使用负整数作为索引<br>
预先指定数组大小<br>
避免使用不连续的索引值<br>
避免逆序对数组赋值<br>

[V8 引擎中的 JavaScript 数组实现分析与性能优化](https://blog.csdn.net/xiebaochun/article/details/85711635)
# JIT和AOT
AOT：静态编译的程序在执行前全部被翻译为机器码，通常将这种类型称为AOT （Ahead of time）即 “提前编译”，代表C/C++。

JIT：解释执行的则是一句一句边翻译边运行，通常将这种类型称为JIT（Just-in-time）即“即时编译”，代表JavaScript、python。

事实上所有脚本语言都支持JIT模式。但需要注意的是JIT和AOT指的是程序运行方式，和编程语言并非强关联的，有些语言既可以以JIT方式运行也可以以AOT方式运行，如Java、Python，它们可以在第一次执行时编译成中间字节码、然后在之后执行时可以直接执行字节码。