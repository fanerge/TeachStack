# 秒杀系统的难点

## 瞬时大并发

有效控制瞬时大并发，可以使用“限流”和“熔断”。
三方库达到目的分布式系统的延迟和容错库 hystrix。

## 超卖（锁库存机制）

我们日常的下单过程中防止超卖一般是通过在数据库上实施乐观锁来完成，使用乐观锁虽然比 for update 这种悲观锁方式性能要好很多，但是还是无法满足秒杀的上万并发需求，我们的方案其实也很简单实时库存的扣减在缓存中进行，异步扣减数据库中的库存，保证缓存中和数据库中库存的最终一致性。<br>
只要保证缓存中的商品数和数据库中商品数始终保持一致。

## 性能

秒杀相关的数据、系统、业务隔离，不要让 1%的请求影响到另外的 99%。

## 防止暴力购买

1.  “秒杀器”，增加答题等手段来控制下单事件，降低下单比例。

# 优化手段

1.  将秒杀活动的静态页面提前刷新到 CDN 节点，缓解访问压力和公司网络带宽。
2.  将活动 H5 页面部署在公有云的 web server 上，利用其动态扩容和成本较低的优势。
3.  秒杀业务功能的 app server 实现“限流”和“熔断”，以免影响其他正常服务的提供。
4.  服务降级处理，对其他无关且非必须的服务降级处理，如首页、购物车、订单查询、大数据等功能进行服务降级（关闭部分定制化功能、将实时查询变为周期性查询）。
5.  保证缓存中的商品数和数据库中商品数始终保持一致。

[淘宝大秒杀系统是如何设计的？](https://blog.csdn.net/emprere/article/details/98860317)
[如何设计一个秒杀系统](https://www.jianshu.com/p/d789ea15d060)
[知乎-如何设计秒杀系统？](https://www.zhihu.com/question/54895548)
